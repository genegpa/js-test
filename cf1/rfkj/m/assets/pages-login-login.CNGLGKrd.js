import{x as e,y as a,U as l,r as s,M as o,a as u,c as n,b as t,i as d,o as r,d as i,e as c,u as m,I as g,g as p,N as f,O as _,P as v,B as h,h as y}from"./index-BRi8qs1L.js";import{_ as V}from"./uni-easyinput.Dk0b39UQ.js";import{r as b}from"./uni-icons.CzjAxGa2.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";const x=j({__name:"login",setup(j){const x=l(),C=s(""),w=s(""),P=s(!1),U=o((()=>""==C.value||""==w.value)),k=async()=>{if(console.log("onLogin:",P.value,U.value),!P.value)return void m({title:"请同意协议",icon:"none"});const l=await(s={username:C.value,userpwd:w.value},e({method:"POST",url:a+"/user/login",data:s}));var s;x.setProfile(l.data),console.log("onLogin:res=",x.profile.token),g({url:"/pages/home/home"}),m({icon:"none",title:"已成功登录！"})},F=e=>{const a=e.detail.value;P.value=0!=a.length,console.log("changeAgree:",P.value)};return(e,a)=>{const l=p,s=d,o=b(u("uni-easyinput"),V),m=f,g=_,j=v,x=h,P=y;return r(),n(s,{class:"login"},{default:t((()=>[i(s,{class:"title"},{default:t((()=>[i(l,null,{default:t((()=>[c("欢迎来到 仁发科技 交易平台")])),_:1})])),_:1}),i(s,{class:"input"},{default:t((()=>[i(o,{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value=e),placeholder:"请输入账号"},null,8,["modelValue"]),i(o,{modelValue:w.value,"onUpdate:modelValue":a[1]||(a[1]=e=>w.value=e),placeholder:"请输入密码",type:"password"},null,8,["modelValue"])])),_:1}),i(s,{class:"agreement"},{default:t((()=>[i(j,{onChange:F},{default:t((()=>[i(g,null,{default:t((()=>[i(m,{value:"agree",color:"#FFCC33",style:{transform:"scale(0.7)"}})])),_:1})])),_:1}),i(l,null,{default:t((()=>[c("已阅读并同意")])),_:1}),i(x,{url:"/pages/login/agreement"},{default:t((()=>[c(" 《用户协议》 ")])),_:1})])),_:1}),i(P,{onClick:k,disabled:U.value},{default:t((()=>[c("登录")])),_:1},8,["disabled"]),i(s,{class:"bottom"},{default:t((()=>[i(x,{url:"/pages/login/sms-login"},{default:t((()=>[i(l,{class:"customicons zhuanfa"}),i(l,null,{default:t((()=>[c("短信验证码登录")])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-060b3dc2"]]);export{x as default};
