import{x as e,U as a,r as l,L as s,a as o,c as u,b as t,i as n,o as r,d,e as i,u as c,H as m,g as p,M as f,N as g,O as _,A as v,h}from"./index-BiBaZczZ.js";import{_ as j}from"./uni-easyinput.CQL6r4T1.js";import{r as V}from"./uni-icons.B5uGoTjz.js";import{h as y}from"./http.Dv2IDCE6.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";const x=b({__name:"login",setup(b){const x=a(),C=l(""),w=l(""),L=l(!1),U=s((()=>""==C.value||""==w.value)),k=async()=>{if(console.log("onLogin:",L.value,U.value),!L.value)return void c({title:"请同意协议",icon:"none"});const a=await(l={username:C.value,userpwd:w.value},y({method:"POST",url:e+"/user/login",data:l}));var l;x.setProfile(a.data),console.log("onLogin:res=",x.profile.token),m({url:"/pages/home/home"}),c({icon:"none",title:"已成功登录！"})},A=e=>{const a=e.detail.value;L.value=0!=a.length,console.log("changeAgree:",L.value)};return(e,a)=>{const l=p,s=n,c=V(o("uni-easyinput"),j),m=f,y=g,b=_,x=v,L=h;return r(),u(s,{class:"login"},{default:t((()=>[d(s,{class:"title"},{default:t((()=>[d(l,null,{default:t((()=>[i("欢迎来到 中广仁发 交易平台")])),_:1})])),_:1}),d(s,{class:"input"},{default:t((()=>[d(c,{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value=e),placeholder:"请输入账号"},null,8,["modelValue"]),d(c,{modelValue:w.value,"onUpdate:modelValue":a[1]||(a[1]=e=>w.value=e),placeholder:"请输入密码",type:"password"},null,8,["modelValue"])])),_:1}),d(s,{class:"agreement"},{default:t((()=>[d(b,{onChange:A},{default:t((()=>[d(y,null,{default:t((()=>[d(m,{value:"agree",color:"#FFCC33",style:{transform:"scale(0.7)"}})])),_:1})])),_:1}),d(l,null,{default:t((()=>[i("已阅读并同意")])),_:1}),d(x,{url:"/pages/login/agreement"},{default:t((()=>[i(" 《用户协议》 ")])),_:1})])),_:1}),d(L,{onClick:k,disabled:U.value},{default:t((()=>[i("登录")])),_:1},8,["disabled"]),d(s,{class:"bottom"},{default:t((()=>[d(x,{url:"/pages/login/sms-login"},{default:t((()=>[d(l,{class:"customicons zhuanfa"}),d(l,null,{default:t((()=>[i("短信验证码登录")])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-62d687c3"]]);export{x as default};
