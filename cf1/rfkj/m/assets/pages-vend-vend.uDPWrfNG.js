import{u as e,q as a,r as l,a as t,j as s,d as u,b as o,F as c,i as n,o as i,e as v,n as d,B as r,C as p,h as f}from"./index-Bo2hzwx3.js";import{_ as m}from"./StatusBar.CmrGUv4z.js";import{r as _}from"./uni-icons.DEXW7Iqy.js";import{_ as g}from"./uni-steps.DVlfDtFo.js";import{_ as h}from"./gp-data-picker.BZuxUyKF.js";import{r as k,a as x,b as V}from"./game.BckseY-l.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";const C=j({__name:"vend",setup(j){const C=e();a((()=>{console.log("onMounted:"),b(),L(),q()}));const y=l(""),S=l([]),b=async()=>{const e=await k();console.log("getGameList:"),S.value=e.data},U=e=>{e.detail.value[0]?y.value=e.detail.value[0].value:y.value="",console.log("selectGame:",y.value),F.value=I.value[0].value,w.value=B.value[0].value,G.value=T.value[0].value},w=l(""),B=l([]),L=async()=>{const e=await x();console.log("getAreaList:"),B.value=e.data},A=e=>{e.detail.value[0]?w.value=e.detail.value[0].value:w.value="",console.log("selectArea:",w.value)},G=l(""),T=l([]),q=async()=>{const e=await V();console.log("getServerList:"),T.value=e.data},z=e=>{e.detail.value[0]?G.value=e.detail.value[0].value:G.value="",console.log("selectServer:",G.value)},F=l(""),I=l([{value:"1",text:"账号"},{value:"2",text:"精粹号"},{value:"3",text:"开局号"},{value:"4",text:"搬砖号"}]),M=e=>{e.detail.value[0]?F.value=e.detail.value[0].value:F.value="",console.log("selectType:",F.value)},N=e=>{if(console.log("onNext:",C.profile.broker),!C.profile.token)return void d({url:"/pages/login/login"});if(0==C.profile.broker.is_real_name)return void r({title:"未实名",content:"需要进行实名认证，是否前往？",confirmText:"去认证",confirmColor:"#fe392e",success:function(e){e.confirm&&d({url:"/pages/user/realname"})}});if(!y.value)return void p({icon:"none",title:"请先选择游戏"});const a=S.value.find((e=>e.value==y.value)),l=I.value.find((e=>e.value==F.value)),t=B.value.find((e=>e.value==w.value)),s=T.value.find((e=>e.value==G.value)),u="?game="+a.text+"&type="+l.text+"&area="+t.text+"&server="+s.text;d({url:"/pages/vend/vend-info"+u})};return(e,a)=>{const l=_(t("StatusBar"),m),d=_(t("uni-steps"),g),r=n,p=_(t("gp-data-picker"),h),k=f;return i(),s(c,null,[u(l),u(d,{class:"steps",options:[{title:"选择商品分类"},{title:"填写商品信息"},{title:"完成商品发布"}],"active-color":"#ff8f02",active:0}),u(r,{class:"select"},{default:o((()=>[u(r,{class:"title"},{default:o((()=>[v(" 请选择商品分类 ")])),_:1}),u(r,{class:"list"},{default:o((()=>[u(r,{class:"item"},{default:o((()=>[u(r,{class:"name"},{default:o((()=>[v(" 游戏名称 ")])),_:1}),u(r,{class:"check"},{default:o((()=>[u(p,{class:"picker",modelValue:y.value,"onUpdate:modelValue":a[0]||(a[0]=e=>y.value=e),isSearch:"",localdata:S.value,placeholder:"游戏名","popup-title":"选择游戏",onChange:U},null,8,["modelValue","localdata"])])),_:1})])),_:1}),u(r,{class:"item"},{default:o((()=>[u(r,{class:"name"},{default:o((()=>[v(" 账号类型 ")])),_:1}),u(r,{class:"check"},{default:o((()=>[u(p,{class:"picker",modelValue:F.value,"onUpdate:modelValue":a[1]||(a[1]=e=>F.value=e),localdata:I.value,placeholder:"类型","popup-title":"选择类型",onChange:M},null,8,["modelValue","localdata"])])),_:1})])),_:1}),u(r,{class:"item"},{default:o((()=>[u(r,{class:"name"},{default:o((()=>[v(" 所在区 ")])),_:1}),u(r,{class:"check"},{default:o((()=>[u(p,{class:"picker",modelValue:w.value,"onUpdate:modelValue":a[2]||(a[2]=e=>w.value=e),localdata:B.value,placeholder:"区服","popup-title":"选择区服",onChange:A},null,8,["modelValue","localdata"])])),_:1})])),_:1}),u(r,{class:"item"},{default:o((()=>[u(r,{class:"name"},{default:o((()=>[v(" 所在服 ")])),_:1}),u(r,{class:"check"},{default:o((()=>[u(p,{class:"picker",modelValue:G.value,"onUpdate:modelValue":a[3]||(a[3]=e=>G.value=e),localdata:T.value,placeholder:"服务器","popup-title":"选择服务器",onChange:z},null,8,["modelValue","localdata"])])),_:1})])),_:1})])),_:1}),u(r,{class:"next"},{default:o((()=>[u(k,{onClick:N,size:"mini"},{default:o((()=>[v("下一步")])),_:1})])),_:1})])),_:1})],64)}}},[["__scopeId","data-v-fed2f978"]]);export{C as default};
