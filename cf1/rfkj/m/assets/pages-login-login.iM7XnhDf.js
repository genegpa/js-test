import{D as e,E as a,u as l,r as s,O as o,a as u,c as n,b as t,i as r,o as d,d as i,e as c,C as m,K as f,g,P as p,Q as _,R as v,H as h,h as V}from"./index-Bo2hzwx3.js";import{_ as y}from"./uni-easyinput.xDDQcpbr.js";import{r as C}from"./uni-icons.DEXW7Iqy.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";const j=b({__name:"login",setup(b){const j=l(),w=s(""),x=s(""),P=s(!1),k=o((()=>""==w.value||""==x.value)),F=async()=>{if(console.log("onLogin:",P.value,k.value),!P.value)return void m({title:"请同意协议",icon:"none"});const l=await(s={username:w.value,userpwd:x.value},e({method:"POST",url:a+"/user/login",data:s}));var s;j.setProfile(l.data),console.log("onLogin:res=",j.profile.token),f({url:"/pages/home/home"}),m({icon:"none",title:"已成功登录！"})},L=e=>{const a=e.detail.value;P.value=0!=a.length,console.log("changeAgree:",P.value)};return(e,a)=>{const l=g,s=r,o=C(u("uni-easyinput"),y),m=p,f=_,b=v,j=h,P=V;return d(),n(s,{class:"login"},{default:t((()=>[i(s,{class:"title"},{default:t((()=>[i(l,null,{default:t((()=>[c("欢迎来到 仁发科技 交易平台")])),_:1})])),_:1}),i(s,{class:"input"},{default:t((()=>[i(o,{modelValue:w.value,"onUpdate:modelValue":a[0]||(a[0]=e=>w.value=e),placeholder:"请输入账号"},null,8,["modelValue"]),i(o,{modelValue:x.value,"onUpdate:modelValue":a[1]||(a[1]=e=>x.value=e),placeholder:"请输入密码",type:"password"},null,8,["modelValue"])])),_:1}),i(s,{class:"agreement"},{default:t((()=>[i(b,{onChange:L},{default:t((()=>[i(f,null,{default:t((()=>[i(m,{value:"agree",color:"#FFCC33",style:{transform:"scale(0.7)"}})])),_:1})])),_:1}),i(l,null,{default:t((()=>[c("已阅读并同意")])),_:1}),i(j,{url:"/pages/login/agreement"},{default:t((()=>[c(" 《用户协议》 ")])),_:1})])),_:1}),i(P,{onClick:F,disabled:k.value},{default:t((()=>[c("登录")])),_:1},8,["disabled"]),i(s,{class:"bottom"},{default:t((()=>[i(j,{url:"/pages/login/sms-login"},{default:t((()=>[i(l,{class:"customicons zhuanfa"}),i(l,null,{default:t((()=>[c("短信验证码登录")])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-646415ec"]]);export{j as default};
