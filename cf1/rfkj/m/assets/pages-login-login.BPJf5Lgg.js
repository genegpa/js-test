import{q as e,s as a,u as l,r as s,ad as o,a as u,c as n,b as t,i as r,o as d,d as i,e as c,O as p,_ as f,g as m,ae as g,af as _,ag as v,ab as h,h as b}from"./index-BdDzkbAV.js";import{_ as j}from"./uni-easyinput.BQ6Vnqls.js";import{r as V}from"./uni-app.es.BL_yUiNM.js";import{_ as y}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.C9PMr36I.js";const C=y({__name:"login",setup(y){const C=l(),k=s(""),w=s(""),x=s(!1),F=o((()=>""==k.value||""==w.value)),L=async()=>{if(console.log("onLogin:",x.value,F.value),!x.value)return void p({title:"请同意协议",icon:"none"});const l=await(s={username:k.value,userpwd:w.value},e({method:"POST",url:a+"/user/login",data:s}));var s;C.setProfile(l.data),console.log("onLogin:res=",C.profile.token),f({url:"/pages/home/home"})},O=e=>{const a=e.detail.value;x.value=0!=a.length,console.log("changeAgree:",x.value)};return(e,a)=>{const l=m,s=r,o=V(u("uni-easyinput"),j),p=g,f=_,y=v,C=h,x=b;return d(),n(s,{class:"login"},{default:t((()=>[i(s,{class:"title"},{default:t((()=>[i(l,null,{default:t((()=>[c("欢迎来到rfkj交易平台")])),_:1})])),_:1}),i(s,{class:"input"},{default:t((()=>[i(o,{modelValue:k.value,"onUpdate:modelValue":a[0]||(a[0]=e=>k.value=e),placeholder:"请输入账号"},null,8,["modelValue"]),i(o,{modelValue:w.value,"onUpdate:modelValue":a[1]||(a[1]=e=>w.value=e),placeholder:"请输入密码",type:"password"},null,8,["modelValue"])])),_:1}),i(s,{class:"agreement"},{default:t((()=>[i(y,{onChange:O},{default:t((()=>[i(f,null,{default:t((()=>[i(p,{value:"agree",color:"#FFCC33",style:{transform:"scale(0.7)"}})])),_:1})])),_:1}),i(l,null,{default:t((()=>[c("已阅读并同意")])),_:1}),i(C,{url:"/pages/login/agreement"},{default:t((()=>[c(" 《用户协议》 ")])),_:1})])),_:1}),i(x,{onClick:L,disabled:F.value},{default:t((()=>[c("登录")])),_:1},8,["disabled"]),i(s,{class:"bottom"},{default:t((()=>[i(C,{url:"/pages/login/sms-login"},{default:t((()=>[i(l,{class:"customicons zhuanfa"}),i(l,null,{default:t((()=>[c("短信验证码登录")])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-be0052ef"]]);export{C as default};
