import{u as e,k as a,r as l,a as t,q as u,d as s,b as o,F as c,i as n,o as v,e as d,n as i,x as r,y as p,h as m}from"./index-Cjv2IsCc.js";import{_ as f}from"./StatusBar.mmxg7BUY.js";import{r as _}from"./uni-icons.Bov9iOdN.js";import{_ as g}from"./gp-data-picker.FpLKe7pL.js";import{V as h}from"./VendSteps.CP7N8gJ0.js";import{r as k,a as x,b as V}from"./game.d65ZXFLf.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-steps.DFpvqZpL.js";const y=j({__name:"vend",setup(j){const y=e();a((()=>{console.log("onMounted:"),b(),A(),q()}));const C=l(""),S=l([]),b=async()=>{const e=await k();console.log("getGameList:"),S.value=e.data},U=e=>{e.detail.value[0]?C.value=e.detail.value[0].value:C.value="",console.log("selectGame:",C.value),F.value=I.value[0].value,w.value=L.value[0].value,G.value=T.value[0].value},w=l(""),L=l([]),A=async()=>{const e=await x();console.log("getAreaList:"),L.value=e.data},B=e=>{e.detail.value[0]?w.value=e.detail.value[0].value:w.value="",console.log("selectArea:",w.value)},G=l(""),T=l([]),q=async()=>{const e=await V();console.log("getServerList:"),T.value=e.data},z=e=>{e.detail.value[0]?G.value=e.detail.value[0].value:G.value="",console.log("selectServer:",G.value)},F=l(""),I=l([{value:"1",text:"账号"},{value:"2",text:"精粹号"},{value:"3",text:"开局号"},{value:"4",text:"搬砖号"}]),M=e=>{e.detail.value[0]?F.value=e.detail.value[0].value:F.value="",console.log("selectType:",F.value)},N=e=>{if(console.log("onNext:",y.profile.broker),!y.profile.token)return void i({url:"/pages/login/login"});if(0==y.profile.broker.is_real_name)return void r({title:"未实名",content:"需要进行实名认证，是否前往？",confirmText:"去认证",confirmColor:"#fe392e",success:function(e){e.confirm&&i({url:"/pages/user/realname"})}});if(!C.value)return void p({icon:"none",title:"请先选择游戏"});const a=S.value.find((e=>e.value==C.value)),l=I.value.find((e=>e.value==F.value)),t=L.value.find((e=>e.value==w.value)),u=T.value.find((e=>e.value==G.value)),s="?game="+a.text+"&type="+l.text+"&area="+t.text+"&server="+u.text;i({url:"/pages/vend/vend-info"+s})};return(e,a)=>{const l=_(t("StatusBar"),f),i=n,r=_(t("gp-data-picker"),g),p=m;return v(),u(c,null,[s(l),s(h,{active:0}),s(i,{class:"select"},{default:o((()=>[s(i,{class:"title"},{default:o((()=>[d(" 请选择商品分类 ")])),_:1}),s(i,{class:"list"},{default:o((()=>[s(i,{class:"item"},{default:o((()=>[s(i,{class:"name"},{default:o((()=>[d(" 游戏名称 ")])),_:1}),s(i,{class:"check"},{default:o((()=>[s(r,{class:"picker",modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value=e),isSearch:"",localdata:S.value,placeholder:"游戏名","popup-title":"选择游戏",onChange:U},null,8,["modelValue","localdata"])])),_:1})])),_:1}),s(i,{class:"item"},{default:o((()=>[s(i,{class:"name"},{default:o((()=>[d(" 账号类型 ")])),_:1}),s(i,{class:"check"},{default:o((()=>[s(r,{class:"picker",modelValue:F.value,"onUpdate:modelValue":a[1]||(a[1]=e=>F.value=e),localdata:I.value,placeholder:"类型","popup-title":"选择类型",onChange:M},null,8,["modelValue","localdata"])])),_:1})])),_:1}),s(i,{class:"item"},{default:o((()=>[s(i,{class:"name"},{default:o((()=>[d(" 所在区 ")])),_:1}),s(i,{class:"check"},{default:o((()=>[s(r,{class:"picker",modelValue:w.value,"onUpdate:modelValue":a[2]||(a[2]=e=>w.value=e),localdata:L.value,placeholder:"大区","popup-title":"选择大区",onChange:B},null,8,["modelValue","localdata"])])),_:1})])),_:1}),s(i,{class:"item"},{default:o((()=>[s(i,{class:"name"},{default:o((()=>[d(" 所在服 ")])),_:1}),s(i,{class:"check"},{default:o((()=>[s(r,{class:"picker",modelValue:G.value,"onUpdate:modelValue":a[3]||(a[3]=e=>G.value=e),localdata:T.value,placeholder:"服务器","popup-title":"选择服务器",onChange:z},null,8,["modelValue","localdata"])])),_:1})])),_:1})])),_:1}),s(i,{class:"next"},{default:o((()=>[s(p,{onClick:N,size:"mini"},{default:o((()=>[d("下一步")])),_:1})])),_:1})])),_:1})],64)}}},[["__scopeId","data-v-1a4b5c4a"]]);export{y as default};
