import{u as e,s as a,r as l,a as t,k as u,d as s,b as o,F as c,i as n,o as v,e as d,n as i,z as r,A as p,h as m}from"./index-go2EMFu_.js";import{_ as f}from"./StatusBar.BgFySL5L.js";import{r as _}from"./uni-icons.8MgWwsk-.js";import{_ as g}from"./gp-data-picker.vknft0E5.js";import{V as k}from"./VendSteps.Cx5Qfqty.js";import{r as h,a as x,b as V}from"./game.9oUgfxCl.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-steps.sEw-lN3F.js";const C=j({__name:"vend",setup(j){const C=e();a((()=>{console.log("onMounted:"),y(),L(),T()}));const S=l(""),b=l([]),y=async()=>{const e=await h();console.log("getGameList:"),b.value=e.data},U=e=>{e.detail.value[0]?S.value=e.detail.value[0].value:S.value="",console.log("selectGame:",S.value),I.value=M.value[0].value,w.value=A.value[0].value,B.value=G.value[0].value},w=l(""),A=l([]),L=async()=>{const e=await x();console.log("getAreaList:"),A.value=e.data},z=e=>{e.detail.value[0]?w.value=e.detail.value[0].value:w.value="",console.log("selectArea:",w.value)},B=l(""),G=l([]),T=async()=>{const e=await V();console.log("getServerList:"),G.value=e.data},F=e=>{e.detail.value[0]?B.value=e.detail.value[0].value:B.value="",console.log("selectServer:",B.value)},I=l(""),M=l([{value:"1",text:"账号"},{value:"2",text:"精粹号"},{value:"3",text:"开局号"},{value:"4",text:"搬砖号"}]),N=e=>{e.detail.value[0]?I.value=e.detail.value[0].value:I.value="",console.log("selectType:",I.value)},q=e=>{if(console.log("onNext:",C.profile.broker),!C.profile.token)return void i({url:"/pages/login/login"});if(0==C.profile.broker.is_real_name)return void r({title:"未实名",content:"需要进行实名认证，是否前往？",confirmText:"去认证",confirmColor:"#fe392e",success:function(e){e.confirm&&i({url:"/pages/user/realname"})}});if(!S.value)return void p({icon:"none",title:"请先选择游戏"});const a=b.value.find((e=>e.value==S.value)),l=M.value.find((e=>e.value==I.value)),t=A.value.find((e=>e.value==w.value)),u=G.value.find((e=>e.value==B.value)),s="?game="+a.text+"&type="+l.text+"&area="+t.text+"&server="+u.text;i({url:"/pages/vend/vend-info"+s})};return(e,a)=>{const l=_(t("StatusBar"),f),i=n,r=_(t("gp-data-picker"),g),p=m;return v(),u(c,null,[s(l),s(k,{active:0}),s(i,{class:"select"},{default:o((()=>[s(i,{class:"title"},{default:o((()=>[d(" 请选择商品分类 ")])),_:1}),s(i,{class:"list"},{default:o((()=>[s(i,{class:"item"},{default:o((()=>[s(i,{class:"name"},{default:o((()=>[d(" 游戏名称 ")])),_:1}),s(i,{class:"check"},{default:o((()=>[s(r,{class:"picker",modelValue:S.value,"onUpdate:modelValue":a[0]||(a[0]=e=>S.value=e),isSearch:"",localdata:b.value,placeholder:"游戏名","popup-title":"选择游戏",onChange:U},null,8,["modelValue","localdata"])])),_:1})])),_:1}),s(i,{class:"item"},{default:o((()=>[s(i,{class:"name"},{default:o((()=>[d(" 账号类型 ")])),_:1}),s(i,{class:"check"},{default:o((()=>[s(r,{class:"picker",modelValue:I.value,"onUpdate:modelValue":a[1]||(a[1]=e=>I.value=e),localdata:M.value,placeholder:"类型","popup-title":"选择类型",onChange:N},null,8,["modelValue","localdata"])])),_:1})])),_:1}),s(i,{class:"item"},{default:o((()=>[s(i,{class:"name"},{default:o((()=>[d(" 所在区 ")])),_:1}),s(i,{class:"check"},{default:o((()=>[s(r,{class:"picker",modelValue:w.value,"onUpdate:modelValue":a[2]||(a[2]=e=>w.value=e),localdata:A.value,placeholder:"大区","popup-title":"选择大区",onChange:z},null,8,["modelValue","localdata"])])),_:1})])),_:1}),s(i,{class:"item"},{default:o((()=>[s(i,{class:"name"},{default:o((()=>[d(" 所在服 ")])),_:1}),s(i,{class:"check"},{default:o((()=>[s(r,{class:"picker",modelValue:B.value,"onUpdate:modelValue":a[3]||(a[3]=e=>B.value=e),localdata:G.value,placeholder:"服务器","popup-title":"选择服务器",onChange:F},null,8,["modelValue","localdata"])])),_:1})])),_:1})])),_:1}),s(i,{class:"next"},{default:o((()=>[s(p,{onClick:q,size:"mini"},{default:o((()=>[d("下一步")])),_:1})])),_:1})])),_:1})],64)}}},[["__scopeId","data-v-1a4b5c4a"]]);export{C as default};
