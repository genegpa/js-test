import{q as a,ah as e,r as l,B as s,a as o,c as u,w as t,i as n,b as r,e as d,h as i,C as c,Y as m,D as p,ac as f,a9 as g,ad as _,ai as v,a6 as h}from"./index-C6Hu5BPG.js";import{_ as j}from"./uni-easyinput.QwPHloOR.js";import{r as V}from"./uni-icons.Dj1oh3_U.js";import{h as y}from"./http.BdL2e2w9.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const b=C({__name:"login",setup(C){const b=e(),w=l(""),k=l(""),x=l(!1),F=s((()=>""==w.value||""==k.value)),L=async()=>{if(console.log("onLogin:",x.value,F.value),!x.value)return void c({title:"请同意协议",icon:"none"});const e=await(l={username:w.value,userpwd:k.value},y({method:"POST",url:a+"/user/login",data:l}));var l;b.setProfile(e.data),console.log("onLogin:res=",b.profile.token),m({url:"/pages/home/home"}),c({icon:"none",title:"已成功登录！"})},P=a=>{const e=a.detail.value;x.value=0!=e.length,console.log("changeAgree:",x.value)};return(a,e)=>{const l=p,s=n,c=V(o("uni-easyinput"),j),m=f,y=g,C=_,b=v,x=h;return r(),u(s,{class:"login"},{default:t((()=>[d(s,{class:"title"},{default:t((()=>[d(l,null,{default:t((()=>[i("欢迎来到 中广仁发 交易平台")])),_:1})])),_:1}),d(s,{class:"input"},{default:t((()=>[d(c,{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=a=>w.value=a),placeholder:"请输入账号"},null,8,["modelValue"]),d(c,{modelValue:k.value,"onUpdate:modelValue":e[1]||(e[1]=a=>k.value=a),placeholder:"请输入密码",type:"password"},null,8,["modelValue"])])),_:1}),d(s,{class:"agreement"},{default:t((()=>[d(C,{onChange:P},{default:t((()=>[d(y,null,{default:t((()=>[d(m,{value:"agree",color:"#FFCC33",style:{transform:"scale(0.7)"}})])),_:1})])),_:1}),d(l,null,{default:t((()=>[i("已阅读并同意")])),_:1}),d(b,{url:"/pages/login/agreement"},{default:t((()=>[i(" 《用户协议》 ")])),_:1})])),_:1}),d(x,{onClick:L,disabled:F.value},{default:t((()=>[i("登录")])),_:1},8,["disabled"]),d(s,{class:"bottom"},{default:t((()=>[d(b,{url:"/pages/login/sms-login"},{default:t((()=>[d(l,{class:"customicons zhuanfa"}),d(l,null,{default:t((()=>[i("短信验证码登录")])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-62d687c3"]]);export{b as default};
