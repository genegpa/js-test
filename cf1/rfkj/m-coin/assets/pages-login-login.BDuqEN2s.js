import{q as a,ab as e,r as l,B as s,a as o,c as u,w as t,i as n,b as r,e as d,h as i,C as c,Y as m,D as f,ad as p,ae as g,af as _,ac as v,a6 as h}from"./index-D2stlVAZ.js";import{_ as b}from"./uni-easyinput.BtZkK2D6.js";import{r as j}from"./uni-icons.CKTOq7Jq.js";import{h as V}from"./http.DwKtXZSd.js";import{_ as y}from"./_plugin-vue_export-helper.BCo6x5W8.js";const C=y({__name:"login",setup(y){const C=e(),w=l(""),k=l(""),x=l(!1),F=s((()=>""==w.value||""==k.value)),L=async()=>{if(console.log("onLogin:",x.value,F.value),!x.value)return void c({title:"请同意协议",icon:"none"});const e=await(l={username:w.value,userpwd:k.value},V({method:"POST",url:a+"/user/login",data:l}));var l;C.setProfile(e.data),console.log("onLogin:res=",C.profile.token),m({url:"/pages/home/home"}),c({icon:"none",title:"已成功登录！"})},P=a=>{const e=a.detail.value;x.value=0!=e.length,console.log("changeAgree:",x.value)};return(a,e)=>{const l=f,s=n,c=j(o("uni-easyinput"),b),m=p,V=g,y=_,C=v,x=h;return r(),u(s,{class:"login"},{default:t((()=>[d(s,{class:"title"},{default:t((()=>[d(l,null,{default:t((()=>[i("欢迎来到 仁发科技 交易平台")])),_:1})])),_:1}),d(s,{class:"input"},{default:t((()=>[d(c,{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=a=>w.value=a),placeholder:"请输入账号"},null,8,["modelValue"]),d(c,{modelValue:k.value,"onUpdate:modelValue":e[1]||(e[1]=a=>k.value=a),placeholder:"请输入密码",type:"password"},null,8,["modelValue"])])),_:1}),d(s,{class:"agreement"},{default:t((()=>[d(y,{onChange:P},{default:t((()=>[d(V,null,{default:t((()=>[d(m,{value:"agree",color:"#FFCC33",style:{transform:"scale(0.7)"}})])),_:1})])),_:1}),d(l,null,{default:t((()=>[i("已阅读并同意")])),_:1}),d(C,{url:"/pages/login/agreement"},{default:t((()=>[i(" 《用户协议》 ")])),_:1})])),_:1}),d(x,{onClick:L,disabled:F.value},{default:t((()=>[i("登录")])),_:1},8,["disabled"]),d(s,{class:"bottom"},{default:t((()=>[d(C,{url:"/pages/login/sms-login"},{default:t((()=>[d(l,{class:"customicons zhuanfa"}),d(l,null,{default:t((()=>[i("短信验证码登录")])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-060b3dc2"]]);export{C as default};
