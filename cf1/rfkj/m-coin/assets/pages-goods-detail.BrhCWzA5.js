import{b as e,c as l,w as a,e as u,m as t,f as s,h as i,D as d,i as n,am as o,af as c,r,a as m,d as f,F as p,t as _,u as h,l as v,C as g,ak as b,k as V,a9 as y,ab as x,ac as k,ad as S,ai as w,a8 as N}from"./index-C6Hu5BPG.js";import{_ as U}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{r as $}from"./uni-icons.Dj1oh3_U.js";import{_ as F}from"./uni-easyinput.QwPHloOR.js";const j=U({name:"UniNumberBox",emits:["change","input","update:modelValue","blur","focus"],props:{value:{type:[Number,String],default:1},modelValue:{type:[Number,String],default:1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},background:{type:String,default:"#f5f5f5"},color:{type:String,default:"#333"},disabled:{type:Boolean,default:!1},width:{type:Number,default:40}},data:()=>({inputValue:0}),watch:{value(e){this.inputValue=+e},modelValue(e){this.inputValue=+e}},computed:{widthWithPx(){return this.width+"px"}},created(){1===this.value&&(this.inputValue=+this.modelValue),1===this.modelValue&&(this.inputValue=+this.value)},methods:{_calcValue(e){if(this.disabled)return;const l=this._getDecimalScale();let a=this.inputValue*l,u=this.step*l;if("minus"===e){if(a-=u,a<this.min*l)return;a>this.max*l&&(a=this.max*l)}if("plus"===e){if(a+=u,a>this.max*l)return;a<this.min*l&&(a=this.min*l)}this.inputValue=(a/l).toFixed(String(l).length-1),this.$emit("input",+this.inputValue),this.$emit("update:modelValue",+this.inputValue),this.$emit("change",+this.inputValue)},_getDecimalScale(){let e=1;return~~this.step!==this.step&&(e=Math.pow(10,String(this.step).split(".")[1].length)),e},_onBlur(e){this.$emit("blur",e);let l=e.detail.value;if(isNaN(l))return void(this.inputValue=this.value);l=+l,l>this.max?l=this.max:l<this.min&&(l=this.min);const a=this._getDecimalScale();this.inputValue=l.toFixed(String(a).length-1),this.$emit("input",+this.inputValue),this.$emit("update:modelValue",+this.inputValue),this.$emit("change",+this.inputValue)},_onFocus(e){this.$emit("focus",e)}}},[["render",function(c,r,m,f,p,_){const h=d,v=n,g=o;return e(),l(v,{class:"uni-numbox"},{default:a((()=>[u(v,{onClick:r[0]||(r[0]=e=>_._calcValue("minus")),class:"uni-numbox__minus uni-numbox-btns",style:t({background:m.background})},{default:a((()=>[u(h,{class:s(["uni-numbox--text",{"uni-numbox--disabled":p.inputValue<=m.min||m.disabled}]),style:t({color:m.color})},{default:a((()=>[i("-")])),_:1},8,["class","style"])])),_:1},8,["style"]),u(g,{disabled:m.disabled,onFocus:_._onFocus,onBlur:_._onBlur,class:"uni-numbox__value",type:m.step<1?"digit":"number",modelValue:p.inputValue,"onUpdate:modelValue":r[1]||(r[1]=e=>p.inputValue=e),style:t({background:m.background,color:m.color,width:_.widthWithPx})},null,8,["disabled","onFocus","onBlur","type","modelValue","style"]),u(v,{onClick:r[2]||(r[2]=e=>_._calcValue("plus")),class:"uni-numbox__plus uni-numbox-btns",style:t({background:m.background})},{default:a((()=>[u(h,{class:s(["uni-numbox--text",{"uni-numbox--disabled":p.inputValue>=m.max||m.disabled}]),style:t({color:m.color})},{default:a((()=>[i("+")])),_:1},8,["class","style"])])),_:1},8,["style"])])),_:1})}],["__scopeId","data-v-91750ff9"]]),B=U({__name:"detail",props:["gid"],setup(t){const s=t,o=new c,U=o.goodsList.findIndex((e=>e.gid==s.gid)),B=o.goodsList[U];console.log("goodsStore:",U);const C=r("0"),q=e=>{C.value=e.detail.value,console.log("changeSpec:",e.detail.value)},D=r(1),I=r(""),L=r(""),P=r(""),Q=r(""),W=r(""),Z=r(""),A=r(!1),K=e=>{const l=e.detail.value;A.value=0!=l.length,console.log("changeAgree:",A.value)},M=e=>{I.value&&L.value&&P.value&&Q.value&&W.value?A.value?(B.specs[C.value].stock-=D.value,console.log("onBuy:",B.specs[C.value].stock),g({title:"购买成功！",icon:"none"}),b()):g({title:"请同意协议",icon:"none"}):g({icon:"none",title:"请填写相关信息"})};return(t,s)=>{const o=n,c=d,r=V,g=N,b=y,U=x,A=$(m("uni-number-box"),j),z=$(m("uni-easyinput"),F),E=k,G=S,H=w;return e(),f(p,null,[u(o,{class:"goods-info"},{default:a((()=>[u(o,{class:"left"},{default:a((()=>[u(o,{class:"title"},{default:a((()=>[i(_(h(B).title),1)])),_:1}),u(o,{class:"desc"},{default:a((()=>[i(_(h(B).specs[C.value].desc),1)])),_:1}),u(o,{class:"desc"},{default:a((()=>[i(_(h(B).region),1)])),_:1})])),_:1}),u(o,{class:"right"},{default:a((()=>[u(o,{class:"price"},{default:a((()=>[u(c,{class:"flag"},{default:a((()=>[i("￥")])),_:1}),i(_(h(B).specs[C.value].price),1)])),_:1}),u(o,{class:"type"},{default:a((()=>[i(_(h(B).trading),1)])),_:1}),u(o,{class:"stock"},{default:a((()=>[i(" 库存："+_(h(B).specs[C.value].stock)+"件 ",1)])),_:1})])),_:1})])),_:1}),u(o,{class:"seller-info"},{default:a((()=>[u(r,{class:"header",mode:"aspectFill",src:"/cf1/rfkj/m-coin/assets/wow-hZejZKdI.png"}),u(o,{class:"right"},{default:a((()=>[u(o,{class:"up"},{default:a((()=>[u(o,{class:"name"},{default:a((()=>[i(" 飓风网游 ")])),_:1}),u(o,{class:"score"},{default:a((()=>[i(" 综合评分：4.95 ")])),_:1})])),_:1}),u(o,{class:"down"},{default:a((()=>[u(c,null,{default:a((()=>[i("成交率：97.80%｜")])),_:1}),u(c,null,{default:a((()=>[i("发货速度：3分钟｜")])),_:1}),u(c,null,{default:a((()=>[i("成交单数：6654笔")])),_:1})])),_:1})])),_:1})])),_:1}),u(o,{class:"buy-info"},{default:a((()=>[u(o,{class:"title"},{default:a((()=>[i(" 购买信息 ")])),_:1}),u(o,{class:"spec line"},{default:a((()=>[u(o,{class:"left"},{default:a((()=>[i(" 商品规格 ")])),_:1}),u(U,{class:"right",onChange:q},{default:a((()=>[(e(!0),f(p,null,v(h(B).specs,((t,s)=>(e(),l(b,{class:"item",key:s},{default:a((()=>[u(g,{class:"circle",color:"#f5173b",value:s.toString(),checked:0==s},null,8,["value","checked"]),u(c,null,{default:a((()=>[i(_(t.coin+"金"+t.price+"元"),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),u(o,{class:"buy-item line"},{default:a((()=>[u(o,null,{default:a((()=>[i(" 购买件数 ")])),_:1}),u(o,{class:"right"},{default:a((()=>[u(A,{class:"number",modelValue:D.value,"onUpdate:modelValue":s[0]||(s[0]=e=>D.value=e),min:1,max:h(B).specs[C.value].stock,color:"$gp-coin-color"},null,8,["modelValue","max"]),i("可购件数"+_(h(B).specs[C.value].stock)+"件 ",1)])),_:1})])),_:1}),u(o,{class:"buy-item line"},{default:a((()=>[u(o,null,{default:a((()=>[i(" 购买数量 ")])),_:1}),u(o,null,{default:a((()=>[i(_(D.value*h(B).specs[C.value].coin)+"金 ",1)])),_:1})])),_:1}),u(o,{class:"buy-item"},{default:a((()=>[u(o,null,{default:a((()=>[i(" 金额 ")])),_:1}),u(o,null,{default:a((()=>[i(_(D.value*h(B).specs[C.value].price)+"元 ",1)])),_:1})])),_:1})])),_:1}),u(o,{class:"address-info"},{default:a((()=>[u(o,{class:"title"},{default:a((()=>[i(" 收货信息 ")])),_:1}),u(o,{class:"item line"},{default:a((()=>[u(o,{class:"head required"},{default:a((()=>[i(" 收货角色 ")])),_:1}),u(o,{class:"value"},{default:a((()=>[u(z,{modelValue:I.value,"onUpdate:modelValue":s[1]||(s[1]=e=>I.value=e),placeholder:"请填写收货角色职业"},null,8,["modelValue"])])),_:1})])),_:1}),u(o,{class:"item line"},{default:a((()=>[u(o,{class:"head required"},{default:a((()=>[i(" 收货角色昵称 ")])),_:1}),u(o,{class:"value"},{default:a((()=>[u(z,{modelValue:L.value,"onUpdate:modelValue":s[2]||(s[2]=e=>L.value=e),placeholder:"请填写收货角色昵称"},null,8,["modelValue"])])),_:1})])),_:1}),u(o,{class:"item line"},{default:a((()=>[u(o,{class:"head required"},{default:a((()=>[i(" 收货角色等级 ")])),_:1}),u(o,{class:"value"},{default:a((()=>[u(z,{modelValue:P.value,"onUpdate:modelValue":s[3]||(s[3]=e=>P.value=e),type:"number",placeholder:"请填写收货角色等级"},null,8,["modelValue"])])),_:1})])),_:1}),u(o,{class:"item line"},{default:a((()=>[u(o,{class:"head required"},{default:a((()=>[i(" 联系电话 ")])),_:1}),u(o,{class:"value"},{default:a((()=>[u(z,{modelValue:Q.value,"onUpdate:modelValue":s[4]||(s[4]=e=>Q.value=e),type:"number",placeholder:"请输入手机号"},null,8,["modelValue"])])),_:1})])),_:1}),u(o,{class:"item line"},{default:a((()=>[u(o,{class:"head required"},{default:a((()=>[i(" QQ号 ")])),_:1}),u(o,{class:"value"},{default:a((()=>[u(z,{modelValue:W.value,"onUpdate:modelValue":s[5]||(s[5]=e=>W.value=e),type:"number",placeholder:"请输入手机号"},null,8,["modelValue"])])),_:1})])),_:1}),u(o,{class:"item"},{default:a((()=>[u(o,{class:"head"},{default:a((()=>[i(" 备注 ")])),_:1}),u(o,{class:"value"},{default:a((()=>[u(z,{modelValue:Z.value,"onUpdate:modelValue":s[6]||(s[6]=e=>Z.value=e),placeholder:"请填写留言"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),u(o,{class:"bottom"}),u(o,{class:"bottom-buy"},{default:a((()=>[u(o,{class:"agreement"},{default:a((()=>[u(G,{onChange:K},{default:a((()=>[u(b,null,{default:a((()=>[u(E,{value:"agree",style:{transform:"scale(0.7)"}})])),_:1})])),_:1}),u(c,null,{default:a((()=>[i("已阅读并同意")])),_:1}),u(H,{url:"/pages/login/agreement"},{default:a((()=>[i(" 《用户协议》 ")])),_:1})])),_:1}),u(o,{class:"buy"},{default:a((()=>[u(o,{class:"price"},{default:a((()=>[u(c,{class:"flag"},{default:a((()=>[i("￥")])),_:1}),i(_(D.value*h(B).specs[C.value].price),1)])),_:1}),u(o,{class:"btn",onClick:M},{default:a((()=>[i("立即购买")])),_:1})])),_:1})])),_:1})],64)}}},[["__scopeId","data-v-ad85a379"]]);export{B as default};
