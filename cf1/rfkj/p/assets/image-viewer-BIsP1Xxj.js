import{aq as It,ar as re,as as Tt,at as St,au as lt,av as Lt,aw as Be,ax as ut,ay as ke,az as ct,aA as Pt,aB as Ct,w as Z,aC as kt,aD as ft,aE as dt,I as vt,r as C,aF as Ft,aG as Nt,A as z,aH as At,b as be,c as P,L as Rt,D as pt,s as le,o as Fe,d as ae,p as xt,g as l,a as J,a4 as Ee,a1 as mt,j as ne,e as A,v as ye,aI as $t,H as Ne,G as Ce,aJ as De,aK as gt,u as Et,E as zt,aL as Bt,B as Dt,x as R,q as L,S as Mt,a6 as x,n as F,h as Me,aj as Ut,z as K,f as V,F as he,_ as Ht,ae as Kt,k as Wt,U as Vt,aM as Xt,ah as Yt,y as Ue,t as qt,X as Gt,O as Qt,aN as jt}from"./index-DQ06wVVE.js";import{n as Zt,_ as _e,o as Jt,p as en,E as G,q as tn,t as nn,d as rn,z as an,w as sn,x as on,y as ln}from"./index-D9dy8V01.js";var un=/\s/;function cn(e){for(var t=e.length;t--&&un.test(e.charAt(t)););return t}var fn=/^\s+/;function dn(e){return e&&e.slice(0,cn(e)+1).replace(fn,"")}var He=NaN,vn=/^[-+]0x[0-9a-f]+$/i,pn=/^0b[01]+$/i,mn=/^0o[0-7]+$/i,gn=parseInt;function Ke(e){if(typeof e=="number")return e;if(It(e))return He;if(re(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=re(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=dn(e);var n=pn.test(e);return n||mn.test(e)?gn(e.slice(2),n?2:8):vn.test(e)?He:+e}function En(e){return e}function yn(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var hn=800,wn=16,bn=Date.now;function _n(e){var t=0,n=0;return function(){var r=bn(),a=wn-(r-n);if(n=r,a>0){if(++t>=hn)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function On(e){return function(){return e}}var we=function(){try{var e=Tt(Object,"defineProperty");return e({},"",{}),e}catch{}}(),In=we?function(e,t){return we(e,"toString",{configurable:!0,enumerable:!1,value:On(t),writable:!0})}:En,Tn=_n(In),Sn=9007199254740991,Ln=/^(?:0|[1-9]\d*)$/;function yt(e,t){var n=typeof e;return t=t??Sn,!!t&&(n=="number"||n!="symbol"&&Ln.test(e))&&e>-1&&e%1==0&&e<t}function Pn(e,t,n){t=="__proto__"&&we?we(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var Cn=Object.prototype,kn=Cn.hasOwnProperty;function Fn(e,t,n){var r=e[t];(!(kn.call(e,t)&&St(r,n))||n===void 0&&!(t in e))&&Pn(e,t,n)}var We=Math.max;function Nn(e,t,n){return t=We(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=We(r.length-t,0),u=Array(i);++a<i;)u[a]=r[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=r[a];return o[t]=n(u),yn(e,this,o)}}var An=9007199254740991;function Rn(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=An}var xn="[object Arguments]";function Ve(e){return lt(e)&&Lt(e)==xn}var ht=Object.prototype,$n=ht.hasOwnProperty,zn=ht.propertyIsEnumerable,wt=Ve(function(){return arguments}())?Ve:function(e){return lt(e)&&$n.call(e,"callee")&&!zn.call(e,"callee")};function Bn(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var Xe=Be?Be.isConcatSpreadable:void 0;function Dn(e){return ut(e)||wt(e)||!!(Xe&&e&&e[Xe])}function Mn(e,t,n,r,a){var i=-1,u=e.length;for(n||(n=Dn),a||(a=[]);++i<u;){var o=e[i];n(o)?Bn(a,o):a[a.length]=o}return a}function Un(e){var t=e==null?0:e.length;return t?Mn(e):[]}function Hn(e){return Tn(Nn(e,void 0,Un),e+"")}function Kn(e,t){return e!=null&&t in Object(e)}function Wn(e,t,n){t=ke(t,e);for(var r=-1,a=t.length,i=!1;++r<a;){var u=ct(t[r]);if(!(i=e!=null&&n(e,u)))break;e=e[u]}return i||++r!=a?i:(a=e==null?0:e.length,!!a&&Rn(a)&&yt(u,a)&&(ut(e)||wt(e)))}function Vn(e,t){return e!=null&&Wn(e,t,Kn)}var Te=function(){return Pt.Date.now()},Xn="Expected a function",Yn=Math.max,qn=Math.min;function Gn(e,t,n){var r,a,i,u,o,g,y=0,m=!1,E=!1,d=!0;if(typeof e!="function")throw new TypeError(Xn);t=Ke(t)||0,re(n)&&(m=!!n.leading,E="maxWait"in n,i=E?Yn(Ke(n.maxWait)||0,t):i,d="trailing"in n?!!n.trailing:d);function v(h){var I=r,k=a;return r=a=void 0,y=h,u=e.apply(k,I),u}function s(h){return y=h,o=setTimeout(w,t),m?v(h):u}function f(h){var I=h-g,k=h-y,M=t-I;return E?qn(M,i-k):M}function b(h){var I=h-g,k=h-y;return g===void 0||I>=t||I<0||E&&k>=i}function w(){var h=Te();if(b(h))return O(h);o=setTimeout(w,f(h))}function O(h){return o=void 0,d&&r?v(h):(r=a=void 0,u)}function W(){o!==void 0&&clearTimeout(o),y=0,r=g=a=o=void 0}function B(){return o===void 0?u:O(Te())}function D(){var h=Te(),I=b(h);if(r=arguments,a=this,g=h,I){if(o===void 0)return s(g);if(E)return clearTimeout(o),o=setTimeout(w,t),v(g)}return o===void 0&&(o=setTimeout(w,t)),u}return D.cancel=W,D.flush=B,D}function Qn(e){return e==null}function jn(e,t,n,r){if(!re(e))return e;t=ke(t,e);for(var a=-1,i=t.length,u=i-1,o=e;o!=null&&++a<i;){var g=ct(t[a]),y=n;if(g==="__proto__"||g==="constructor"||g==="prototype")return e;if(a!=u){var m=o[g];y=void 0,y===void 0&&(y=re(m)?m:yt(t[a+1])?[]:{})}Fn(o,g,y),o=o[g]}return e}function Zn(e,t,n){for(var r=-1,a=t.length,i={};++r<a;){var u=t[r],o=Ct(e,u);n(o,u)&&jn(i,ke(u,e),o)}return i}function Jn(e,t){return Zn(e,t,function(n,r){return Vn(e,r)})}var er=Hn(function(e,t){return e==null?{}:Jn(e,t)}),tr="Expected a function";function Se(e,t,n){var r=!0,a=!0;if(typeof e!="function")throw new TypeError(tr);return re(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Gn(e,t,{leading:r,maxWait:t,trailing:a})}function te(e){var t;const n=dt(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Ae=z?window:void 0;function X(...e){let t,n,r,a;if(kt(e[0])||Array.isArray(e[0])?([n,r,a]=e,t=Ae):[t,n,r,a]=e,!t)return ft;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const i=[],u=()=>{i.forEach(m=>m()),i.length=0},o=(m,E,d,v)=>(m.addEventListener(E,d,v),()=>m.removeEventListener(E,d,v)),g=Z(()=>[te(t),dt(a)],([m,E])=>{u(),m&&i.push(...n.flatMap(d=>r.map(v=>o(m,d,v,E))))},{immediate:!0,flush:"post"}),y=()=>{g(),u()};return vt(y),y}let Ye=!1;function Qr(e,t,n={}){const{window:r=Ae,ignore:a=[],capture:i=!0,detectIframe:u=!1}=n;if(!r)return;At&&!Ye&&(Ye=!0,Array.from(r.document.body.children).forEach(d=>d.addEventListener("click",ft)));let o=!0;const g=d=>a.some(v=>{if(typeof v=="string")return Array.from(r.document.querySelectorAll(v)).some(s=>s===d.target||d.composedPath().includes(s));{const s=te(v);return s&&(d.target===s||d.composedPath().includes(s))}}),m=[X(r,"click",d=>{const v=te(e);if(!(!v||v===d.target||d.composedPath().includes(v))){if(d.detail===0&&(o=!g(d)),!o){o=!0;return}t(d)}},{passive:!0,capture:i}),X(r,"pointerdown",d=>{const v=te(e);v&&(o=!d.composedPath().includes(v)&&!g(d))},{passive:!0}),u&&X(r,"blur",d=>{var v;const s=te(e);((v=r.document.activeElement)==null?void 0:v.tagName)==="IFRAME"&&!(s!=null&&s.contains(r.document.activeElement))&&t(d)})].filter(Boolean);return()=>m.forEach(d=>d())}function nr(e,t=!1){const n=C(),r=()=>n.value=!!e();return r(),Ft(r,t),n}const qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ge="__vueuse_ssr_handlers__";qe[Ge]=qe[Ge]||{};var Qe=Object.getOwnPropertySymbols,rr=Object.prototype.hasOwnProperty,ar=Object.prototype.propertyIsEnumerable,sr=(e,t)=>{var n={};for(var r in e)rr.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Qe)for(var r of Qe(e))t.indexOf(r)<0&&ar.call(e,r)&&(n[r]=e[r]);return n};function jr(e,t,n={}){const r=n,{window:a=Ae}=r,i=sr(r,["window"]);let u;const o=nr(()=>a&&"ResizeObserver"in a),g=()=>{u&&(u.disconnect(),u=void 0)},y=Z(()=>te(e),E=>{g(),o.value&&a&&E&&(u=new ResizeObserver(t),u.observe(E,i))},{immediate:!0,flush:"post"}),m=()=>{g(),y()};return vt(m),{isSupported:o,stop:m}}var je;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(je||(je={}));var or=Object.defineProperty,Ze=Object.getOwnPropertySymbols,ir=Object.prototype.hasOwnProperty,lr=Object.prototype.propertyIsEnumerable,Je=(e,t,n)=>t in e?or(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ur=(e,t)=>{for(var n in t)ir.call(t,n)&&Je(e,n,t[n]);if(Ze)for(var n of Ze(t))lr.call(t,n)&&Je(e,n,t[n]);return e};const cr={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};ur({linear:Nt},cr);class fr extends Error{constructor(t){super(t),this.name="ElementPlusError"}}function Zr(e,t){throw new fr(`[${e}] ${t}`)}function Jr(e,t){}const dr=(e,t)=>{if(!z)return!1;const n={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(t)],r=Zt(e,n);return["scroll","auto","overlay"].some(a=>r.includes(a))},vr=(e,t)=>{if(!z)return;let n=e;for(;n;){if([window,document,document.documentElement].includes(n))return window;if(dr(n,t))return n;n=n.parentNode}return n},bt=e=>e,pr=be({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),ea=e=>er(pr,e),mr=["class","style"],gr=/^on[A-Z]/,Er=(e={})=>{const{excludeListeners:t=!1,excludeKeys:n}=e,r=P(()=>((n==null?void 0:n.value)||[]).concat(mr)),a=Rt();return a?P(()=>{var i;return pt(Object.entries((i=a.proxy)==null?void 0:i.$attrs).filter(([u])=>!r.value.includes(u)&&!(t&&gr.test(u))))}):P(()=>({}))},Le="focus-trap.focus-after-trapped",Pe="focus-trap.focus-after-released",yr="focus-trap.focusout-prevented",et={cancelable:!0,bubbles:!1},hr={cancelable:!0,bubbles:!1},tt="focusAfterTrapped",nt="focusAfterReleased",wr=Symbol("elFocusTrap"),Re=C(),Oe=C(0),xe=C(0);let pe=0;const _t=e=>{const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0||r===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t},rt=(e,t)=>{for(const n of e)if(!br(n,t))return n},br=(e,t)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},_r=e=>{const t=_t(e),n=rt(t,e),r=rt(t.reverse(),e);return[n,r]},Or=e=>e instanceof HTMLInputElement&&"select"in e,Q=(e,t)=>{if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),xe.value=window.performance.now(),e!==n&&Or(e)&&t&&e.select()}};function at(e,t){const n=[...e],r=e.indexOf(t);return r!==-1&&n.splice(r,1),n}const Ir=()=>{let e=[];return{push:r=>{const a=e[0];a&&r!==a&&a.pause(),e=at(e,r),e.unshift(r)},remove:r=>{var a,i;e=at(e,r),(i=(a=e[0])==null?void 0:a.resume)==null||i.call(a)}}},Tr=(e,t=!1)=>{const n=document.activeElement;for(const r of e)if(Q(r,t),document.activeElement!==n)return},st=Ir(),Sr=()=>Oe.value>xe.value,me=()=>{Re.value="pointer",Oe.value=window.performance.now()},ot=()=>{Re.value="keyboard",Oe.value=window.performance.now()},Lr=()=>(le(()=>{pe===0&&(document.addEventListener("mousedown",me),document.addEventListener("touchstart",me),document.addEventListener("keydown",ot)),pe++}),Fe(()=>{pe--,pe<=0&&(document.removeEventListener("mousedown",me),document.removeEventListener("touchstart",me),document.removeEventListener("keydown",ot))}),{focusReason:Re,lastUserFocusTimestamp:Oe,lastAutomatedFocusTimestamp:xe}),ge=e=>new CustomEvent(yr,{...hr,detail:e}),j={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"};let ee=[];const it=e=>{e.code===j.esc&&ee.forEach(t=>t(e))},Pr=e=>{le(()=>{ee.length===0&&document.addEventListener("keydown",it),z&&ee.push(e)}),Fe(()=>{ee=ee.filter(t=>t!==e),ee.length===0&&z&&document.removeEventListener("keydown",it)})},Cr=ae({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[tt,nt,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:t}){const n=C();let r,a;const{focusReason:i}=Lr();Pr(s=>{e.trapped&&!u.paused&&t("release-requested",s)});const u={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},o=s=>{if(!e.loop&&!e.trapped||u.paused)return;const{code:f,altKey:b,ctrlKey:w,metaKey:O,currentTarget:W,shiftKey:B}=s,{loop:D}=e,h=f===j.tab&&!b&&!w&&!O,I=document.activeElement;if(h&&I){const k=W,[M,Y]=_r(k);if(M&&Y){if(!B&&I===Y){const N=ge({focusReason:i.value});t("focusout-prevented",N),N.defaultPrevented||(s.preventDefault(),D&&Q(M,!0))}else if(B&&[M,k].includes(I)){const N=ge({focusReason:i.value});t("focusout-prevented",N),N.defaultPrevented||(s.preventDefault(),D&&Q(Y,!0))}}else if(I===k){const N=ge({focusReason:i.value});t("focusout-prevented",N),N.defaultPrevented||s.preventDefault()}}};xt(wr,{focusTrapRef:n,onKeydown:o}),Z(()=>e.focusTrapEl,s=>{s&&(n.value=s)},{immediate:!0}),Z([n],([s],[f])=>{s&&(s.addEventListener("keydown",o),s.addEventListener("focusin",m),s.addEventListener("focusout",E)),f&&(f.removeEventListener("keydown",o),f.removeEventListener("focusin",m),f.removeEventListener("focusout",E))});const g=s=>{t(tt,s)},y=s=>t(nt,s),m=s=>{const f=l(n);if(!f)return;const b=s.target,w=s.relatedTarget,O=b&&f.contains(b);e.trapped||w&&f.contains(w)||(r=w),O&&t("focusin",s),!u.paused&&e.trapped&&(O?a=b:Q(a,!0))},E=s=>{const f=l(n);if(!(u.paused||!f))if(e.trapped){const b=s.relatedTarget;!Qn(b)&&!f.contains(b)&&setTimeout(()=>{if(!u.paused&&e.trapped){const w=ge({focusReason:i.value});t("focusout-prevented",w),w.defaultPrevented||Q(a,!0)}},0)}else{const b=s.target;b&&f.contains(b)||t("focusout",s)}};async function d(){await Ee();const s=l(n);if(s){st.push(u);const f=s.contains(document.activeElement)?r:document.activeElement;if(r=f,!s.contains(f)){const w=new Event(Le,et);s.addEventListener(Le,g),s.dispatchEvent(w),w.defaultPrevented||Ee(()=>{let O=e.focusStartEl;mt(O)||(Q(O),document.activeElement!==O&&(O="first")),O==="first"&&Tr(_t(s),!0),(document.activeElement===f||O==="container")&&Q(s)})}}}function v(){const s=l(n);if(s){s.removeEventListener(Le,g);const f=new CustomEvent(Pe,{...et,detail:{focusReason:i.value}});s.addEventListener(Pe,y),s.dispatchEvent(f),!f.defaultPrevented&&(i.value=="keyboard"||!Sr()||s.contains(document.activeElement))&&Q(r??document.body),s.removeEventListener(Pe,y),st.remove(u)}}return le(()=>{e.trapped&&d(),Z(()=>e.trapped,s=>{s?d():v()})}),Fe(()=>{e.trapped&&v(),n.value&&(n.value.removeEventListener("keydown",o),n.value.removeEventListener("focusin",m),n.value.removeEventListener("focusout",E),n.value=void 0)}),{onKeydown:o}}});function kr(e,t,n,r,a,i){return J(e.$slots,"default",{handleKeydown:e.onKeydown})}var Fr=_e(Cr,[["render",kr],["__file","focus-trap.vue"]]);const Nr=be({to:{type:ne([String,Object]),required:!0},disabled:Boolean}),Ar=ae({__name:"teleport",props:Nr,setup(e){return(t,n)=>t.disabled?J(t.$slots,"default",{key:0}):(A(),ye($t,{key:1,to:t.to},[J(t.$slots,"default")],8,["to"]))}});var Rr=_e(Ar,[["__file","teleport.vue"]]);const xr=Ne(Rr),$r=(e,t)=>{if(!z||!e||!t)return!1;const n=e.getBoundingClientRect();let r;return t instanceof Element?r=t.getBoundingClientRect():r={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},n.top<r.bottom&&n.bottom>r.top&&n.right>r.left&&n.left<r.right},zr=be({urlList:{type:ne(Array),default:()=>bt([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:ne(String)}}),Br={close:()=>!0,switch:e=>Ce(e),rotate:e=>Ce(e)},Dr=ae({name:"ElImageViewer"}),Mr=ae({...Dr,props:zr,emits:Br,setup(e,{expose:t,emit:n}){var r;const a=e,i={CONTAIN:{name:"contain",icon:De(Jt)},ORIGINAL:{name:"original",icon:De(en)}},{t:u}=gt(),o=Et("image-viewer"),{nextZIndex:g}=zt(),y=C(),m=C([]),E=Bt(),d=C(!0),v=C(a.initialIndex),s=Dt(i.CONTAIN),f=C({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),b=C((r=a.zIndex)!=null?r:g()),w=P(()=>{const{urlList:p}=a;return p.length<=1}),O=P(()=>v.value===0),W=P(()=>v.value===a.urlList.length-1),B=P(()=>a.urlList[v.value]),D=P(()=>[o.e("btn"),o.e("prev"),o.is("disabled",!a.infinite&&O.value)]),h=P(()=>[o.e("btn"),o.e("next"),o.is("disabled",!a.infinite&&W.value)]),I=P(()=>{const{scale:p,deg:S,offsetX:_,offsetY:$,enableTransition:U}=f.value;let H=_/p,q=$/p;const ie=S*Math.PI/180,$e=Math.cos(ie),ze=Math.sin(ie);H=H*$e+q*ze,q=q*$e-_/p*ze;const Ie={transform:`scale(${p}) rotate(${S}deg) translate(${H}px, ${q}px)`,transition:U?"transform .3s":""};return s.value.name===i.CONTAIN.name&&(Ie.maxWidth=Ie.maxHeight="100%"),Ie});function k(){Y(),n("close")}function M(){const p=Se(_=>{switch(_.code){case j.esc:a.closeOnPressEscape&&k();break;case j.space:fe();break;case j.left:de();break;case j.up:T("zoomIn");break;case j.right:c();break;case j.down:T("zoomOut");break}}),S=Se(_=>{const $=_.deltaY||_.deltaX;T($<0?"zoomIn":"zoomOut",{zoomRate:a.zoomRate,enableTransition:!1})});E.run(()=>{X(document,"keydown",p),X(document,"wheel",S)})}function Y(){E.stop()}function se(){d.value=!1}function N(p){d.value=!1,p.target.alt=u("el.image.error")}function ue(p){if(d.value||p.button!==0||!y.value)return;f.value.enableTransition=!1;const{offsetX:S,offsetY:_}=f.value,$=p.pageX,U=p.pageY,H=Se(ie=>{f.value={...f.value,offsetX:S+ie.pageX-$,offsetY:_+ie.pageY-U}}),q=X(document,"mousemove",H);X(document,"mouseup",()=>{q()}),p.preventDefault()}function ce(){f.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function fe(){if(d.value)return;const p=Xt(i),S=Object.values(i),_=s.value.name,U=(S.findIndex(H=>H.name===_)+1)%p.length;s.value=i[p[U]],ce()}function oe(p){const S=a.urlList.length;v.value=(p+S)%S}function de(){O.value&&!a.infinite||oe(v.value-1)}function c(){W.value&&!a.infinite||oe(v.value+1)}function T(p,S={}){if(d.value)return;const{minScale:_,maxScale:$}=a,{zoomRate:U,rotateDeg:H,enableTransition:q}={zoomRate:a.zoomRate,rotateDeg:90,enableTransition:!0,...S};switch(p){case"zoomOut":f.value.scale>_&&(f.value.scale=Number.parseFloat((f.value.scale/U).toFixed(3)));break;case"zoomIn":f.value.scale<$&&(f.value.scale=Number.parseFloat((f.value.scale*U).toFixed(3)));break;case"clockwise":f.value.deg+=H,n("rotate",f.value.deg);break;case"anticlockwise":f.value.deg-=H,n("rotate",f.value.deg);break}f.value.enableTransition=q}function ve(p){var S;((S=p.detail)==null?void 0:S.focusReason)==="pointer"&&p.preventDefault()}function Ot(){a.closeOnPressEscape&&k()}return Z(B,()=>{Ee(()=>{const p=m.value[0];p!=null&&p.complete||(d.value=!0)})}),Z(v,p=>{ce(),n("switch",p)}),le(()=>{M()}),t({setActiveItem:oe}),(p,S)=>(A(),ye(l(xr),{to:"body",disabled:!p.teleported},{default:R(()=>[L(Mt,{name:"viewer-fade",appear:""},{default:R(()=>[x("div",{ref_key:"wrapper",ref:y,tabindex:-1,class:F(l(o).e("wrapper")),style:Me({zIndex:b.value})},[L(l(Fr),{loop:"",trapped:"","focus-trap-el":y.value,"focus-start-el":"container",onFocusoutPrevented:ve,onReleaseRequested:Ot},{default:R(()=>[x("div",{class:F(l(o).e("mask")),onClick:Ut(_=>p.hideOnClickModal&&k(),["self"])},null,10,["onClick"]),K(" CLOSE "),x("span",{class:F([l(o).e("btn"),l(o).e("close")]),onClick:k},[L(l(G),null,{default:R(()=>[L(l(tn))]),_:1})],2),K(" ARROW "),l(w)?K("v-if",!0):(A(),V(he,{key:0},[x("span",{class:F(l(D)),onClick:de},[L(l(G),null,{default:R(()=>[L(l(nn))]),_:1})],2),x("span",{class:F(l(h)),onClick:c},[L(l(G),null,{default:R(()=>[L(l(rn))]),_:1})],2)],64)),K(" ACTIONS "),x("div",{class:F([l(o).e("btn"),l(o).e("actions")])},[x("div",{class:F(l(o).e("actions__inner"))},[L(l(G),{onClick:_=>T("zoomOut")},{default:R(()=>[L(l(an))]),_:1},8,["onClick"]),L(l(G),{onClick:_=>T("zoomIn")},{default:R(()=>[L(l(sn))]),_:1},8,["onClick"]),x("i",{class:F(l(o).e("actions__divider"))},null,2),L(l(G),{onClick:fe},{default:R(()=>[(A(),ye(Ht(l(s).icon)))]),_:1}),x("i",{class:F(l(o).e("actions__divider"))},null,2),L(l(G),{onClick:_=>T("anticlockwise")},{default:R(()=>[L(l(on))]),_:1},8,["onClick"]),L(l(G),{onClick:_=>T("clockwise")},{default:R(()=>[L(l(ln))]),_:1},8,["onClick"])],2)],2),K(" CANVAS "),x("div",{class:F(l(o).e("canvas"))},[(A(!0),V(he,null,Kt(p.urlList,(_,$)=>Wt((A(),V("img",{ref_for:!0,ref:U=>m.value[$]=U,key:_,src:_,style:Me(l(I)),class:F(l(o).e("img")),crossorigin:p.crossorigin,onLoad:se,onError:N,onMousedown:ue},null,46,["src","crossorigin"])),[[Vt,$===v.value]])),128))],2),J(p.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}});var Ur=_e(Mr,[["__file","image-viewer.vue"]]);const Hr=Ne(Ur),Kr=be({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:ne([String,Object])},previewSrcList:{type:ne(Array),default:()=>bt([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:ne(String)}}),Wr={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>Ce(e),close:()=>!0,show:()=>!0},Vr=ae({name:"ElImage",inheritAttrs:!1}),Xr=ae({...Vr,props:Kr,emits:Wr,setup(e,{emit:t}){const n=e;let r="";const{t:a}=gt(),i=Et("image"),u=Yt(),o=P(()=>pt(Object.entries(u).filter(([c])=>/^(data-|on[A-Z])/i.test(c)||["id","style"].includes(c)))),g=Er({excludeListeners:!0,excludeKeys:P(()=>Object.keys(o.value))}),y=C(),m=C(!1),E=C(!0),d=C(!1),v=C(),s=C(),f=z&&"loading"in HTMLImageElement.prototype;let b,w;const O=P(()=>[i.e("inner"),B.value&&i.e("preview"),E.value&&i.is("loading")]),W=P(()=>{const{fit:c}=n;return z&&c?{objectFit:c}:{}}),B=P(()=>{const{previewSrcList:c}=n;return Qt(c)&&c.length>0}),D=P(()=>{const{previewSrcList:c,initialIndex:T}=n;let ve=T;return T>c.length-1&&(ve=0),ve}),h=P(()=>n.loading==="eager"?!1:!f&&n.loading==="lazy"||n.lazy),I=()=>{z&&(E.value=!0,m.value=!1,y.value=n.src)};function k(c){E.value=!1,m.value=!1,t("load",c)}function M(c){E.value=!1,m.value=!0,t("error",c)}function Y(){$r(v.value,s.value)&&(I(),ue())}const se=jt(Y,200,!0);async function N(){var c;if(!z)return;await Ee();const{scrollContainer:T}=n;qt(T)?s.value=T:mt(T)&&T!==""?s.value=(c=document.querySelector(T))!=null?c:void 0:v.value&&(s.value=vr(v.value)),s.value&&(b=X(s,"scroll",se),setTimeout(()=>Y(),100))}function ue(){!z||!s.value||!se||(b==null||b(),s.value=void 0)}function ce(c){if(c.ctrlKey){if(c.deltaY<0)return c.preventDefault(),!1;if(c.deltaY>0)return c.preventDefault(),!1}}function fe(){B.value&&(w=X("wheel",ce,{passive:!1}),r=document.body.style.overflow,document.body.style.overflow="hidden",d.value=!0,t("show"))}function oe(){w==null||w(),document.body.style.overflow=r,d.value=!1,t("close")}function de(c){t("switch",c)}return Z(()=>n.src,()=>{h.value?(E.value=!0,m.value=!1,ue(),N()):I()}),le(()=>{h.value?N():I()}),(c,T)=>(A(),V("div",Ue({ref_key:"container",ref:v},l(o),{class:[l(i).b(),c.$attrs.class]}),[m.value?J(c.$slots,"error",{key:0},()=>[x("div",{class:F(l(i).e("error"))},Gt(l(a)("el.image.error")),3)]):(A(),V(he,{key:1},[y.value!==void 0?(A(),V("img",Ue({key:0},l(g),{src:y.value,loading:c.loading,style:l(W),class:l(O),crossorigin:c.crossorigin,onClick:fe,onLoad:k,onError:M}),null,16,["src","loading","crossorigin"])):K("v-if",!0),E.value?(A(),V("div",{key:1,class:F(l(i).e("wrapper"))},[J(c.$slots,"placeholder",{},()=>[x("div",{class:F(l(i).e("placeholder"))},null,2)])],2)):K("v-if",!0)],64)),l(B)?(A(),V(he,{key:2},[d.value?(A(),ye(l(Hr),{key:0,"z-index":c.zIndex,"initial-index":l(D),infinite:c.infinite,"zoom-rate":c.zoomRate,"min-scale":c.minScale,"max-scale":c.maxScale,"url-list":c.previewSrcList,crossorigin:c.crossorigin,"hide-on-click-modal":c.hideOnClickModal,teleported:c.previewTeleported,"close-on-press-escape":c.closeOnPressEscape,onClose:oe,onSwitch:de},{default:R(()=>[c.$slots.viewer?(A(),V("div",{key:0},[J(c.$slots,"viewer")])):K("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):K("v-if",!0)],64)):K("v-if",!0)],16))}});var Yr=_e(Xr,[["__file","image.vue"]]);const ta=Ne(Yr);export{Fr as E,ea as a,j as b,xr as c,jr as d,ta as e,X as f,Er as g,Jr as h,Qn as i,bt as m,Qr as o,Zr as t,te as u};
